name: Workflow for DB 
on:
  pull_request:
    branches: [main]

jobs:
  # Label of the container job
  pr-review:
    # Containers must run in Linux based operating systems
    runs-on: ubuntu-latest
    # Docker Hub image that `container-job` executes in
    
    # Service containers to run with `container-job`
    services: 
     mysql: 
      image: mysql:5.7
      env:
          MYSQL_DATABASE: demoDb
          MYSQL_USER: ${{ secrets.USER }}
          MYSQL_PASSWORD: ${{ secrets.DB_PASSWORD }}
          options: --health-cmd="mysqladmin ping" --health-interval=10s --health-timeout=5s --health-retries=3     
      ports:
          - 3306:3306
    steps:
      - name: Check out repository code
        uses: actions/checkout@v4
      - name: Node.js setup
        uses: actions/setup-node@v2
        with:
          node-version: '14.x'
      - name: Install dependencies
        run: npm install
      - name: Run tests
        run: npm test
      
     